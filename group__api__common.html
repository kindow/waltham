<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Waltham: Common API for both server and client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Waltham
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Common API for both server and client<div class="ingroups"><a class="el" href="group__api__server.html">Server API</a> &#124; <a class="el" href="group__api__client.html">Client API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwth__connection.html">wth_connection</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Waltham connection.  <a href="classwth__connection.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwth__object.html">wth_object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A generic Waltham protocol object representation (a proxy)  <a href="classwth__object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf13c012b0d11379986ad71553061b81a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#gaf13c012b0d11379986ad71553061b81a">wth_connection::wth_connection_from_fd</a> (int fd, enum <a class="el" href="waltham-connection_8h.html#a0860bddeb5bb7253a0474b557a5ca2d4">wth_connection_side</a> side)</td></tr>
<tr class="memdesc:gaf13c012b0d11379986ad71553061b81a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use an already connected socket.  <a href="#gaf13c012b0d11379986ad71553061b81a">More...</a><br /></td></tr>
<tr class="separator:gaf13c012b0d11379986ad71553061b81a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga842cca1f1ccb767bea5bd086e035194b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#ga842cca1f1ccb767bea5bd086e035194b">wth_connection::wth_connection_get_fd</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn)</td></tr>
<tr class="memdesc:ga842cca1f1ccb767bea5bd086e035194b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get connection file descriptor.  <a href="#ga842cca1f1ccb767bea5bd086e035194b">More...</a><br /></td></tr>
<tr class="separator:ga842cca1f1ccb767bea5bd086e035194b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb62b719598fd0d1f7242a9c003be263"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#gadb62b719598fd0d1f7242a9c003be263">wth_connection::wth_connection_destroy</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn)</td></tr>
<tr class="memdesc:gadb62b719598fd0d1f7242a9c003be263"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect.  <a href="#gadb62b719598fd0d1f7242a9c003be263">More...</a><br /></td></tr>
<tr class="separator:gadb62b719598fd0d1f7242a9c003be263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c1b4b75fb3b943167d911a00961a111"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#ga3c1b4b75fb3b943167d911a00961a111">wth_connection::wth_connection_flush</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn)</td></tr>
<tr class="memdesc:ga3c1b4b75fb3b943167d911a00961a111"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush buffered messages to the network.  <a href="#ga3c1b4b75fb3b943167d911a00961a111">More...</a><br /></td></tr>
<tr class="separator:ga3c1b4b75fb3b943167d911a00961a111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4108a4f13e0d52e054826afda23b17b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#gae4108a4f13e0d52e054826afda23b17b">wth_connection::wth_connection_read</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn)</td></tr>
<tr class="memdesc:gae4108a4f13e0d52e054826afda23b17b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data received from the network.  <a href="#gae4108a4f13e0d52e054826afda23b17b">More...</a><br /></td></tr>
<tr class="separator:gae4108a4f13e0d52e054826afda23b17b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe1b48fb7be58159f6f98c8dc2b61e1f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#gabe1b48fb7be58159f6f98c8dc2b61e1f">wth_connection::wth_connection_dispatch</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn)</td></tr>
<tr class="memdesc:gabe1b48fb7be58159f6f98c8dc2b61e1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatch incoming messages.  <a href="#gabe1b48fb7be58159f6f98c8dc2b61e1f">More...</a><br /></td></tr>
<tr class="separator:gabe1b48fb7be58159f6f98c8dc2b61e1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae088971a3c3ea3ed63cc9875fd4f751b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#gae088971a3c3ea3ed63cc9875fd4f751b">wth_connection::wth_connection_get_error</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn)</td></tr>
<tr class="memdesc:gae088971a3c3ea3ed63cc9875fd4f751b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the connection error state.  <a href="#gae088971a3c3ea3ed63cc9875fd4f751b">More...</a><br /></td></tr>
<tr class="separator:gae088971a3c3ea3ed63cc9875fd4f751b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93db72bc2f462d21fa283f024e189e85"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#ga93db72bc2f462d21fa283f024e189e85">wth_connection::wth_connection_get_protocol_error</a> (struct <a class="el" href="classwth__connection.html">wth_connection</a> *conn, const char **interface, uint32_t *object_id)</td></tr>
<tr class="memdesc:ga93db72bc2f462d21fa283f024e189e85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return protocol error details.  <a href="#ga93db72bc2f462d21fa283f024e189e85">More...</a><br /></td></tr>
<tr class="separator:ga93db72bc2f462d21fa283f024e189e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03764163f711214e1f3bf4871cf48cde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#ga03764163f711214e1f3bf4871cf48cde">wth_object::wth_object_delete</a> (struct <a class="el" href="classwth__object.html">wth_object</a> *object)</td></tr>
<tr class="memdesc:ga03764163f711214e1f3bf4871cf48cde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a protocol object.  <a href="#ga03764163f711214e1f3bf4871cf48cde">More...</a><br /></td></tr>
<tr class="separator:ga03764163f711214e1f3bf4871cf48cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06eb6fbb917c926956476cd7a6cd5bdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#ga06eb6fbb917c926956476cd7a6cd5bdd">wth_object::wth_object_set_listener</a> (struct <a class="el" href="classwth__object.html">wth_object</a> *obj, void(**listener)(void), void *user_data)</td></tr>
<tr class="memdesc:ga06eb6fbb917c926956476cd7a6cd5bdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set incoming message handlers for a protocol object.  <a href="#ga06eb6fbb917c926956476cd7a6cd5bdd">More...</a><br /></td></tr>
<tr class="separator:ga06eb6fbb917c926956476cd7a6cd5bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c86b96678d1f0ce9105bf51d80dd388"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__common.html#ga5c86b96678d1f0ce9105bf51d80dd388">wth_object::wth_object_get_user_data</a> (struct <a class="el" href="classwth__object.html">wth_object</a> *obj)</td></tr>
<tr class="memdesc:ga5c86b96678d1f0ce9105bf51d80dd388"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set incoming message handlers for a protocol object.  <a href="#ga5c86b96678d1f0ce9105bf51d80dd388">More...</a><br /></td></tr>
<tr class="separator:ga5c86b96678d1f0ce9105bf51d80dd388"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadb62b719598fd0d1f7242a9c003be263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb62b719598fd0d1f7242a9c003be263">&#9670;&nbsp;</a></span>wth_connection_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wth_connection_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection.</td></tr>
  </table>
  </dd>
</dl>
<p>Disconnects if still connected, and destroys the <a class="el" href="classwth__connection.html" title="A Waltham connection. ">wth_connection</a>. The wth_display gets destroyed too.</p>
<p>This call does not block. Messages still en route may get discarded. </p>

</div>
</div>
<a id="gabe1b48fb7be58159f6f98c8dc2b61e1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe1b48fb7be58159f6f98c8dc2b61e1f">&#9670;&nbsp;</a></span>wth_connection_dispatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wth_connection_dispatch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dispatch incoming messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of dispatched messages, or -1 on error.</dd></dl>
<p>This function calls the message handlers (listeners, interface callbacks) for buffered messages. The messages must have been buffered by an earlier call to <a class="el" href="group__api__common.html#gae4108a4f13e0d52e054826afda23b17b" title="Read data received from the network. ">wth_connection_read()</a> as no reading from the network is attempted.</p>
<p>On error, errno is set. For nothing to dispatch, 0 is returned.</p>
<p>In case the connection is set to protocol error state during this call or earlier, this function will return -1 and set errno to EPROTO. No further messages will be dispatched once the protocol error state has been set.</p>
<p>Servers should keep the connection open regardless of EPROTO errors to ensure the error event gets delivered to the client. </p>

</div>
</div>
<a id="ga3c1b4b75fb3b943167d911a00961a111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3c1b4b75fb3b943167d911a00961a111">&#9670;&nbsp;</a></span>wth_connection_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wth_connection_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush buffered messages to the network. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written to network, or -1 on failure.</dd></dl>
<p>Attempts to send all buffered messages to the network. It writes as much data as possible without blocking. If any data remains unsent, -1 is returned and errno is set to EAGAIN. In case of EAGAIN, poll for writable and flush again.</p>
<p>This call does not block. On failure, errno is set.</p>
<p>This function does not indicate if the connection has been set as failed due to a protocol error. This behaviour allows the server to continue flushing events out so that the protocol error event will reach the client. </p>

</div>
</div>
<a id="gaf13c012b0d11379986ad71553061b81a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf13c012b0d11379986ad71553061b81a">&#9670;&nbsp;</a></span>wth_connection_from_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="classwth__connection.html">wth_connection</a> * wth_connection_from_fd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="waltham-connection_8h.html#a0860bddeb5bb7253a0474b557a5ca2d4">wth_connection_side</a>&#160;</td>
          <td class="paramname"><em>side</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use an already connected socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>A network TCP socket fd of an existing connection. </td></tr>
    <tr><td class="paramname">side</td><td>Defines whether the local side is a server or a client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new <a class="el" href="classwth__connection.html" title="A Waltham connection. ">wth_connection</a>, or NULL on failure.</dd></dl>
<p>This function is used to wrap an already connected file descriptor in a <a class="el" href="classwth__connection.html" title="A Waltham connection. ">wth_connection</a>. The <a class="el" href="classwth__connection.html" title="A Waltham connection. ">wth_connection</a> will own a duplicate of the fd, not the fd passed in. The user must close its fd after calling this.</p>
<p>XXX: You could probably use this as an internal helper too, for the common things of <a class="el" href="group__api__client.html#ga92558808e3c20da42ed44fc2d540da07" title="Connect to a remote Waltham server. ">wth_connect_to_server()</a> and <a class="el" href="group__api__server.html#ga9073b3086e003ba09ec15c7b142a4140" title="Accept a Waltham client connection. ">wth_accept()</a>. But this is completely optional otherwise. </p>

</div>
</div>
<a id="gae088971a3c3ea3ed63cc9875fd4f751b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae088971a3c3ea3ed63cc9875fd4f751b">&#9670;&nbsp;</a></span>wth_connection_get_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wth_connection_get_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the connection error state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The error code from the 'errno' set, or zero for no error.</dd></dl>
<p>If the returned code is EPROTO, <a class="el" href="group__api__common.html#ga93db72bc2f462d21fa283f024e189e85" title="Return protocol error details. ">wth_connection_get_protocol_error()</a> can be used to get the protocol error details. </p>

</div>
</div>
<a id="ga842cca1f1ccb767bea5bd086e035194b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga842cca1f1ccb767bea5bd086e035194b">&#9670;&nbsp;</a></span>wth_connection_get_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wth_connection_get_fd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get connection file descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file descriptor associated with the connection.</dd></dl>
<p>The returned fd can be used for polling for readable and writable, so that <a class="el" href="group__api__common.html#gae4108a4f13e0d52e054826afda23b17b" title="Read data received from the network. ">wth_connection_read()</a> and <a class="el" href="group__api__common.html#ga3c1b4b75fb3b943167d911a00961a111" title="Flush buffered messages to the network. ">wth_connection_flush()</a> can be called at the needed times.</p>
<p>The fd will remain owned by the <a class="el" href="classwth__connection.html" title="A Waltham connection. ">wth_connection</a>. </p>

</div>
</div>
<a id="ga93db72bc2f462d21fa283f024e189e85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93db72bc2f462d21fa283f024e189e85">&#9670;&nbsp;</a></span>wth_connection_get_protocol_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wth_connection_get_protocol_error </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>object_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return protocol error details. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection. </td></tr>
    <tr><td class="paramname">interface</td><td>Return pointer to the interface name. </td></tr>
    <tr><td class="paramname">object_id</td><td>Return the object ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The interface specific error code.</dd></dl>
<p>The returned interface name and object ID are for the object that was referenced when the server sent the error event. The returned error code is specific to that interface, and zero does not mean "no error".</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__api__common.html#gae088971a3c3ea3ed63cc9875fd4f751b" title="Return the connection error state. ">wth_connection_get_error()</a> </dd></dl>

</div>
</div>
<a id="gae4108a4f13e0d52e054826afda23b17b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4108a4f13e0d52e054826afda23b17b">&#9670;&nbsp;</a></span>wth_connection_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wth_connection_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__connection.html">wth_connection</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data received from the network. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The Waltham connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure with errno set.</dd></dl>
<p>Reads as much data as available on the network socket into internal buffers. To actually dispatch incoming messages, use <a class="el" href="group__api__common.html#gabe1b48fb7be58159f6f98c8dc2b61e1f" title="Dispatch incoming messages. ">wth_connection_dispatch()</a> after reading.</p>
<p>This call does not block. If no data is available, the call returns immediately with success.</p>
<p>The connection being in protocol error state does not cause this function to return error, but it does cause all read data to be discarded. </p>

</div>
</div>
<a id="ga03764163f711214e1f3bf4871cf48cde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03764163f711214e1f3bf4871cf48cde">&#9670;&nbsp;</a></span>wth_object_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wth_object_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__object.html">wth_object</a> *&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a protocol object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>The protocol object cast from a specific interface type.</td></tr>
  </table>
  </dd>
</dl>
<p>The <a class="el" href="classwth__object.html" title="A generic Waltham protocol object representation (a proxy) ">wth_object</a> is destroyed and its object ID is no longer valid.</p>
<p>This function is usually called by the wrapper functions created by the code generator. You should not need to call this manually. </p>

</div>
</div>
<a id="ga5c86b96678d1f0ce9105bf51d80dd388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c86b96678d1f0ce9105bf51d80dd388">&#9670;&nbsp;</a></span>wth_object_get_user_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * wth_object_get_user_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__object.html">wth_object</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set incoming message handlers for a protocol object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>The protocol object cast from a specific interface type.</td></tr>
  </table>
  </dd>
</dl>
<p>Returns the user data pointer set by <a class="el" href="group__api__common.html#ga06eb6fbb917c926956476cd7a6cd5bdd" title="Set incoming message handlers for a protocol object. ">wth_object_set_listener()</a>.</p>
<p>This function is usually called by the wrapper functions created by the code generator. You should not need to call this manually. </p>

</div>
</div>
<a id="ga06eb6fbb917c926956476cd7a6cd5bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06eb6fbb917c926956476cd7a6cd5bdd">&#9670;&nbsp;</a></span>wth_object_set_listener()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wth_object_set_listener </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="classwth__object.html">wth_object</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(**)(void)&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set incoming message handlers for a protocol object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>The protocol object cast from a specific interface type. </td></tr>
    <tr><td class="paramname">listener</td><td>An array of function pointers, cast from a virtual function table (a struct created by the code generator). </td></tr>
    <tr><td class="paramname">user_data</td><td>Arbitrary pointer to store with the <a class="el" href="classwth__object.html" title="A generic Waltham protocol object representation (a proxy) ">wth_object</a>.</td></tr>
  </table>
  </dd>
</dl>
<p>After this call, <a class="el" href="group__api__common.html#gabe1b48fb7be58159f6f98c8dc2b61e1f" title="Dispatch incoming messages. ">wth_connection_dispatch()</a> will call the given function pointers for incoming messages for this particular protocol object instance.</p>
<p>The user data pointer can be retrieved with <a class="el" href="group__api__common.html#ga5c86b96678d1f0ce9105bf51d80dd388" title="Set incoming message handlers for a protocol object. ">wth_object_get_user_data()</a>.</p>
<p>This function is usually called by the wrapper functions created by the code generator. You should not need to call this manually.</p>
<dl class="section note"><dt>Note</dt><dd>Server and client side objects use a different set of function pointers. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
